{% extends "base.html" %}
{% load blog_tags %}



{% block title %}{{ post.title }}{% endblock title %}

{% block content %}
  <div class="section">
    <article class=>
      <h1 class="title is-1">{{ post.title }}</h1>
      <p>Published {{ post.publish }} by {{ post.author }}</p>
      {{ post.body|linebreaks }}
    </article>
    {% with comments.count as total_comments %}
      <h5 class="title is-5">{{ total_comments }} comment{{ total_comments|pluralize:"s" }}</h5>
    {% endwith %}
    {% for comment in comments %}
      <article class="section">
        <p class="is-info">
          Comment {{ forloop.counter }} added by {{ comment.name }}
        </p>
        {{ comment.created }}
        <p>
          {{ comment.body|markdown }}
        </p>
      </article>
    {% empty %}
      There is no comments
    {% endfor %}
    <div class="section">
      {% if new_comment %}
      <h5 class="title is-5">Your comment is added</h5>
      {% else %}
        <h5 class="title is-5">Add new comment</h5>
        <form action="" method="post">
        {% csrf_token %}
          {{ form.as_p }}
          <p>
            <input type="submit" value="Add comment">
          </p>
        </form>
      {% endif %}
    </div>
  </div>

{% endblock content %}